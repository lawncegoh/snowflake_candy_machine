{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\Desktop\\\\snowflake_candy_machine\\\\src\\\\Home.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Countdown from \"react-countdown\";\nimport { Button, CircularProgress, Snackbar } from \"@material-ui/core\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport { LAMPORTS_PER_SOL } from \"@solana/web3.js\";\nimport { useAnchorWallet } from \"@solana/wallet-adapter-react\";\nimport { WalletDialogButton } from \"@solana/wallet-adapter-material-ui\";\nimport Gif from \"./assets/teaser.gif\";\nimport { Container } from 'reactstrap';\nimport { awaitTransactionSignatureConfirmation, getCandyMachineState, mintOneToken } from \"./candy-machine\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ConnectButton = styled(WalletDialogButton)``;\n_c = ConnectButton;\nconst CounterText = styled.span``;\n_c2 = CounterText;\nconst MainDiv = styled.div`\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  width: 400px;\n  height: 600px;\n  background: black;\n  -webkit-mask-image: -webkit-gradient(linear, center top, center bottom, \n    color-stop(0.80,  rgba(0,0,0,1)),\n    color-stop(1.00,  rgba(0,0,0,0)));\n  mask-image: -webkit-gradient(linear, center top, center bottom, \n    color-stop(0.80,  rgba(0,0,0,1)),\n    color-stop(1.00,  rgba(0,0,0,0)));\n`;\n_c3 = MainDiv;\nconst InnerDiv = styled.div`\n  position: fixed;\n  left: 50%;\n  top: 60%;\n  transform: translate(-50%, -50%);\n`;\n_c4 = InnerDiv;\nconst MintContainer = styled.div`\n  position: fixed;\n  left: 50%;\n  top: 85%;\n  transform: translate(-50%, -50%);\n  color: grey;\n`;\n_c5 = MintContainer;\nconst MintButton = styled(Button)``; // add your styles here\n\n_c6 = MintButton;\n\nconst Home = props => {\n  _s();\n\n  const [balance, setBalance] = useState();\n  const [isActive, setIsActive] = useState(false); // true when countdown completes\n\n  const [isSoldOut, setIsSoldOut] = useState(false); // true when items remaining is zero\n\n  const [isMinting, setIsMinting] = useState(false); // true when user got to press MINT\n\n  const [itemsAvailable, setItemsAvailable] = useState(0);\n  const [itemsRedeemed, setItemsRedeemed] = useState(0);\n  const [itemsRemaining, setItemsRemaining] = useState(0);\n  const [alertState, setAlertState] = useState({\n    open: false,\n    message: \"\",\n    severity: undefined\n  });\n  const [startDate, setStartDate] = useState(new Date(props.startDate));\n  const wallet = useAnchorWallet();\n  const [candyMachine, setCandyMachine] = useState();\n\n  const refreshCandyMachineState = () => {\n    (async () => {\n      if (!wallet) return;\n      const {\n        candyMachine,\n        goLiveDate,\n        itemsAvailable,\n        itemsRemaining,\n        itemsRedeemed\n      } = await getCandyMachineState(wallet, props.candyMachineId, props.connection);\n      setItemsAvailable(itemsAvailable);\n      setItemsRemaining(itemsRemaining);\n      setItemsRedeemed(itemsRedeemed);\n      setIsSoldOut(itemsRemaining === 0);\n      setStartDate(goLiveDate);\n      setCandyMachine(candyMachine);\n    })();\n  };\n\n  const onMint = async () => {\n    try {\n      setIsMinting(true);\n\n      if (wallet && (candyMachine === null || candyMachine === void 0 ? void 0 : candyMachine.program)) {\n        const mintTxId = await mintOneToken(candyMachine, props.config, wallet.publicKey, props.treasury);\n        const status = await awaitTransactionSignatureConfirmation(mintTxId, props.txTimeout, props.connection, \"singleGossip\", false);\n\n        if (!(status === null || status === void 0 ? void 0 : status.err)) {\n          setAlertState({\n            open: true,\n            message: \"Congratulations! Mint succeeded!\",\n            severity: \"success\"\n          });\n        } else {\n          setAlertState({\n            open: true,\n            message: \"Mint failed! Please try again!\",\n            severity: \"error\"\n          });\n        }\n      }\n    } catch (error) {\n      // TODO: blech:\n      let message = error.msg || \"Minting failed! Please try again!\";\n      console.log(\"test\");\n\n      /*#__PURE__*/\n      _jsxDEV(\"a\", {\n        href: \"https://polanabears.com\",\n        children: \"Website\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 7\n      }, this);\n\n      if (!error.msg) {\n        if (error.message.indexOf(\"0x138\")) {} else if (error.message.indexOf(\"0x137\")) {\n          message = `SOLD OUT!`;\n        } else if (error.message.indexOf(\"0x135\")) {\n          message = `Insufficient funds to mint. Please fund your wallet.`;\n        }\n      } else {\n        if (error.code === 311) {\n          message = `SOLD OUT!`;\n          setIsSoldOut(true);\n        } else if (error.code === 312) {\n          message = `Minting period hasn't started yet.`;\n        }\n      }\n\n      setAlertState({\n        open: true,\n        message,\n        severity: \"error\"\n      });\n    } finally {\n      if (wallet) {\n        const balance = await props.connection.getBalance(wallet.publicKey);\n        setBalance(balance / LAMPORTS_PER_SOL);\n      }\n\n      setIsMinting(false);\n      refreshCandyMachineState();\n    }\n  };\n\n  useEffect(() => {\n    (async () => {\n      if (wallet) {\n        const balance = await props.connection.getBalance(wallet.publicKey);\n        setBalance(balance / LAMPORTS_PER_SOL);\n      }\n    })();\n  }, [wallet, props.connection]);\n  useEffect(refreshCandyMachineState, [wallet, props.candyMachineId, props.connection]);\n\n  var Snow = require('react-snow-effect');\n\n  const cardStylingForDesktop = {\n    container: {\n      height: \"20vh\",\n      width: \"20vw\",\n      display: \"flex\",\n      alignItems: \"center\",\n      marginBottom: \"10%\",\n      justifyContent: \"center\"\n    },\n    img: {\n      display: \"flex\",\n      marginLeft: \"auto\",\n      marginRight: \"auto\",\n      width: \"100%\",\n      maxWidth: \"100%\",\n      height: \"auto\",\n      marginBottom: \"100%\"\n    }\n  };\n  const StyledP = styled.div`\n  text-align: center;\n`;\n  return /*#__PURE__*/_jsxDEV(MainDiv, {\n    children: [/*#__PURE__*/_jsxDEV(Snow, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), balance && itemsRemaining && /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 39\n    }, this), /*#__PURE__*/_jsxDEV(InnerDiv, {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        style: cardStylingForDesktop.container,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          style: cardStylingForDesktop.img,\n          src: Gif,\n          alt: \"teaser\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this), wallet && /*#__PURE__*/_jsxDEV(StyledP, {\n        children: [\"Snowflakes minted: \", itemsRedeemed]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 22\n      }, this), wallet && /*#__PURE__*/_jsxDEV(StyledP, {\n        children: [\"Total Supply of Snowflakes: \", itemsAvailable]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(MintContainer, {\n      children: !wallet ? /*#__PURE__*/_jsxDEV(ConnectButton, {\n        children: \"Connect Wallet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(MintButton, {\n        disabled: isSoldOut || isMinting || !isActive,\n        onClick: onMint,\n        variant: \"contained\",\n        children: isSoldOut ? \"SOLD OUT\" : isActive ? isMinting ? /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 17\n        }, this) : \"MINT\" : /*#__PURE__*/_jsxDEV(Countdown, {\n          date: startDate,\n          onMount: ({\n            completed\n          }) => completed && setIsActive(true),\n          onComplete: () => setIsActive(true),\n          renderer: renderCounter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: alertState.open,\n      autoHideDuration: 6000,\n      onClose: () => setAlertState({ ...alertState,\n        open: false\n      }),\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: () => setAlertState({ ...alertState,\n          open: false\n        }),\n        severity: alertState.severity,\n        children: alertState.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"5ltyfUVhaj6f60Wz/lw3Cz9k2RU=\", false, function () {\n  return [useAnchorWallet];\n});\n\n_c7 = Home;\n\nconst renderCounter = ({\n  days,\n  hours,\n  minutes,\n  seconds,\n  completed\n}) => {\n  return /*#__PURE__*/_jsxDEV(CounterText, {\n    children: [hours + (days || 0) * 24, \" hours, \", minutes, \" minutes, \", seconds, \" seconds\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 301,\n    columnNumber: 5\n  }, this);\n};\n\nexport default Home;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"ConnectButton\");\n$RefreshReg$(_c2, \"CounterText\");\n$RefreshReg$(_c3, \"MainDiv\");\n$RefreshReg$(_c4, \"InnerDiv\");\n$RefreshReg$(_c5, \"MintContainer\");\n$RefreshReg$(_c6, \"MintButton\");\n$RefreshReg$(_c7, \"Home\");","map":{"version":3,"sources":["C:/Users/User/OneDrive/Desktop/snowflake_candy_machine/src/Home.tsx"],"names":["useEffect","useState","styled","Countdown","Button","CircularProgress","Snackbar","Alert","LAMPORTS_PER_SOL","useAnchorWallet","WalletDialogButton","Gif","Container","awaitTransactionSignatureConfirmation","getCandyMachineState","mintOneToken","ConnectButton","CounterText","span","MainDiv","div","InnerDiv","MintContainer","MintButton","Home","props","balance","setBalance","isActive","setIsActive","isSoldOut","setIsSoldOut","isMinting","setIsMinting","itemsAvailable","setItemsAvailable","itemsRedeemed","setItemsRedeemed","itemsRemaining","setItemsRemaining","alertState","setAlertState","open","message","severity","undefined","startDate","setStartDate","Date","wallet","candyMachine","setCandyMachine","refreshCandyMachineState","goLiveDate","candyMachineId","connection","onMint","program","mintTxId","config","publicKey","treasury","status","txTimeout","err","error","msg","console","log","indexOf","code","getBalance","Snow","require","cardStylingForDesktop","container","height","width","display","alignItems","marginBottom","justifyContent","img","marginLeft","marginRight","maxWidth","StyledP","completed","renderCounter","days","hours","minutes","seconds"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Countdown from \"react-countdown\";\r\nimport { Button, CircularProgress, Snackbar } from \"@material-ui/core\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport * as anchor from \"@project-serum/anchor\";\r\n\r\nimport { LAMPORTS_PER_SOL } from \"@solana/web3.js\";\r\n\r\nimport { useAnchorWallet } from \"@solana/wallet-adapter-react\";\r\nimport { WalletDialogButton } from \"@solana/wallet-adapter-material-ui\";\r\n\r\nimport Gif from \"./assets/teaser.gif\";\r\n\r\nimport {\r\n  Container\r\n} from 'reactstrap'\r\n\r\nimport {\r\n  CandyMachine,\r\n  awaitTransactionSignatureConfirmation,\r\n  getCandyMachineState,\r\n  mintOneToken,\r\n} from \"./candy-machine\";\r\n\r\n\r\nconst ConnectButton = styled(WalletDialogButton)``;\r\n\r\nconst CounterText = styled.span``;\r\n\r\nconst MainDiv = styled.div`\r\n  position: fixed;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 400px;\r\n  height: 600px;\r\n  background: black;\r\n  -webkit-mask-image: -webkit-gradient(linear, center top, center bottom, \r\n    color-stop(0.80,  rgba(0,0,0,1)),\r\n    color-stop(1.00,  rgba(0,0,0,0)));\r\n  mask-image: -webkit-gradient(linear, center top, center bottom, \r\n    color-stop(0.80,  rgba(0,0,0,1)),\r\n    color-stop(1.00,  rgba(0,0,0,0)));\r\n`;\r\n\r\nconst InnerDiv = styled.div`\r\n  position: fixed;\r\n  left: 50%;\r\n  top: 60%;\r\n  transform: translate(-50%, -50%);\r\n`;\r\n\r\nconst MintContainer = styled.div`\r\n  position: fixed;\r\n  left: 50%;\r\n  top: 85%;\r\n  transform: translate(-50%, -50%);\r\n  color: grey;\r\n`;\r\n\r\nconst MintButton = styled(Button)``; // add your styles here\r\n\r\nexport interface HomeProps {\r\n  candyMachineId: anchor.web3.PublicKey;\r\n  config: anchor.web3.PublicKey;\r\n  connection: anchor.web3.Connection;\r\n  startDate: number;\r\n  treasury: anchor.web3.PublicKey;\r\n  txTimeout: number;\r\n}\r\n\r\nconst Home = (props: HomeProps) => {\r\n  const [balance, setBalance] = useState<number>();\r\n  const [isActive, setIsActive] = useState(false); // true when countdown completes\r\n  const [isSoldOut, setIsSoldOut] = useState(false); // true when items remaining is zero\r\n  const [isMinting, setIsMinting] = useState(false); // true when user got to press MINT\r\n\r\n  const [itemsAvailable, setItemsAvailable] = useState(0);\r\n  const [itemsRedeemed, setItemsRedeemed] = useState(0);\r\n  const [itemsRemaining, setItemsRemaining] = useState(0);\r\n\r\n  const [alertState, setAlertState] = useState<AlertState>({\r\n    open: false,\r\n    message: \"\",\r\n    severity: undefined,\r\n  });\r\n\r\n  const [startDate, setStartDate] = useState(new Date(props.startDate));\r\n\r\n  const wallet = useAnchorWallet();\r\n  const [candyMachine, setCandyMachine] = useState<CandyMachine>();\r\n\r\n  const refreshCandyMachineState = () => {\r\n    (async () => {\r\n      if (!wallet) return;\r\n\r\n      const {\r\n        candyMachine,\r\n        goLiveDate,\r\n        itemsAvailable,\r\n        itemsRemaining,\r\n        itemsRedeemed,\r\n      } = await getCandyMachineState(\r\n        wallet as anchor.Wallet,\r\n        props.candyMachineId,\r\n        props.connection\r\n      );\r\n\r\n      setItemsAvailable(itemsAvailable);\r\n      setItemsRemaining(itemsRemaining);\r\n      setItemsRedeemed(itemsRedeemed);\r\n\r\n      setIsSoldOut(itemsRemaining === 0);\r\n      setStartDate(goLiveDate);\r\n      setCandyMachine(candyMachine);\r\n    })();\r\n  };\r\n\r\n  const onMint = async () => {\r\n    try {\r\n      setIsMinting(true);\r\n      if (wallet && candyMachine?.program) {\r\n        const mintTxId = await mintOneToken(\r\n          candyMachine,\r\n          props.config,\r\n          wallet.publicKey,\r\n          props.treasury\r\n        );\r\n\r\n        const status = await awaitTransactionSignatureConfirmation(\r\n          mintTxId,\r\n          props.txTimeout,\r\n          props.connection,\r\n          \"singleGossip\",\r\n          false\r\n        );\r\n\r\n        if (!status?.err) {\r\n          setAlertState({\r\n            open: true,\r\n            message: \"Congratulations! Mint succeeded!\",\r\n            severity: \"success\",\r\n          });\r\n        } else {\r\n          setAlertState({\r\n            open: true,\r\n            message: \"Mint failed! Please try again!\",\r\n            severity: \"error\",\r\n          });\r\n        }\r\n      }\r\n    } catch (error: any) {\r\n      // TODO: blech:\r\n      let message = error.msg || \"Minting failed! Please try again!\";\r\n      console.log(\"test\");\r\n      <a href=\"https://polanabears.com\">Website</a>\r\n      if (!error.msg) {\r\n        if (error.message.indexOf(\"0x138\")) {\r\n        } else if (error.message.indexOf(\"0x137\")) {\r\n          message = `SOLD OUT!`;\r\n        } else if (error.message.indexOf(\"0x135\")) {\r\n          message = `Insufficient funds to mint. Please fund your wallet.`;\r\n        }\r\n      } else {\r\n        if (error.code === 311) {\r\n          message = `SOLD OUT!`;\r\n          setIsSoldOut(true);\r\n        } else if (error.code === 312) {\r\n          message = `Minting period hasn't started yet.`;\r\n        }\r\n      }\r\n\r\n      setAlertState({\r\n        open: true,\r\n        message,\r\n        severity: \"error\",\r\n      });\r\n    } finally {\r\n      if (wallet) {\r\n        const balance = await props.connection.getBalance(wallet.publicKey);\r\n        setBalance(balance / LAMPORTS_PER_SOL);\r\n      }\r\n      setIsMinting(false);\r\n      refreshCandyMachineState();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (wallet) {\r\n        const balance = await props.connection.getBalance(wallet.publicKey);\r\n        setBalance(balance / LAMPORTS_PER_SOL);\r\n      }\r\n    })();\r\n  }, [wallet, props.connection]);\r\n\r\n  useEffect(refreshCandyMachineState, [\r\n    wallet,\r\n    props.candyMachineId,\r\n    props.connection,\r\n  ]);\r\n\r\n  var Snow = require('react-snow-effect');\r\n\r\n  const cardStylingForDesktop = {\r\n    container: {\r\n      height: \"20vh\",\r\n      width: \"20vw\",\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      marginBottom: \"10%\",\r\n      justifyContent: \"center\",\r\n\r\n    },\r\n    img: {\r\n      display: \"flex\",\r\n      marginLeft: \"auto\",\r\n      marginRight: \"auto\",\r\n      width:\"100%\",\r\n      maxWidth: \"100%\",\r\n      height: \"auto\",\r\n      marginBottom: \"100%\"\r\n    }\r\n  }\r\n\r\n  const StyledP = styled.div`\r\n  text-align: center;\r\n`;\r\n\r\n  return (\r\n    <MainDiv>\r\n      <Snow />\r\n        {/* {wallet && (\r\n          <p>Wallet {shortenAddress(wallet.publicKey.toBase58() || \"\")}</p>\r\n        )}\r\n\r\n        {wallet && <p>Balance: {(balance || 0).toLocaleString()} SOL</p>} */}\r\n        {balance && itemsRemaining && <div></div>}\r\n        <InnerDiv>\r\n          <Container style={cardStylingForDesktop.container}>\r\n            <img style={cardStylingForDesktop.img} src={Gif} alt=\"teaser\" />\r\n          </Container>\r\n          {wallet && <StyledP>Snowflakes minted: {itemsRedeemed}</StyledP>}\r\n          {wallet && <StyledP>Total Supply of Snowflakes: {itemsAvailable}</StyledP>}\r\n        </InnerDiv>\r\n      <MintContainer>\r\n        {!wallet ? (\r\n          <ConnectButton>Connect Wallet</ConnectButton>\r\n        ) : (\r\n          <MintButton\r\n            disabled={isSoldOut || isMinting || !isActive}\r\n            onClick={onMint}\r\n            variant=\"contained\"\r\n          >\r\n            {isSoldOut ? (\r\n              \"SOLD OUT\"\r\n            ) : isActive ? (\r\n              isMinting ? (\r\n                <CircularProgress />\r\n              ) : (\r\n                \"MINT\"\r\n              )\r\n            ) : (\r\n              <Countdown\r\n                date={startDate}\r\n                onMount={({ completed }) => completed && setIsActive(true)}\r\n                onComplete={() => setIsActive(true)}\r\n                renderer={renderCounter}\r\n              />\r\n            )}\r\n          </MintButton>\r\n        )}\r\n      </MintContainer>\r\n\r\n      <Snackbar\r\n        open={alertState.open}\r\n        autoHideDuration={6000}\r\n        onClose={() => setAlertState({ ...alertState, open: false })}\r\n      >\r\n        <Alert\r\n          onClose={() => setAlertState({ ...alertState, open: false })}\r\n          severity={alertState.severity}\r\n        >\r\n          {alertState.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </MainDiv>\r\n  );\r\n};\r\n\r\ninterface AlertState {\r\n  open: boolean;\r\n  message: string;\r\n  severity: \"success\" | \"info\" | \"warning\" | \"error\" | undefined;\r\n}\r\n\r\nconst renderCounter = ({ days, hours, minutes, seconds, completed }: any) => {\r\n  return (\r\n    <CounterText>\r\n      {hours + (days || 0) * 24} hours, {minutes} minutes, {seconds} seconds\r\n    </CounterText>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}