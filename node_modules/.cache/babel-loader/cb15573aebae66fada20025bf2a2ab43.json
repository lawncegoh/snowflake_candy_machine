{"ast":null,"code":"import { useCallback, useState } from 'react';\nexport function useLocalStorage(key, defaultState) {\n  const [value, setValue] = useState(() => {\n    if (typeof localStorage === 'undefined') return defaultState;\n    const value = localStorage.getItem(key);\n    if (value) return JSON.parse(value);\n    return defaultState;\n  });\n  const setLocalStorage = useCallback(newValue => {\n    if (newValue === value) return;\n    setValue(newValue);\n\n    if (newValue === null) {\n      localStorage.removeItem(key);\n    } else {\n      localStorage.setItem(key, JSON.stringify(newValue));\n    }\n  }, [value, setValue, key]);\n  return [value, setLocalStorage];\n}","map":{"version":3,"sources":["../src/useLocalStorage.ts"],"names":[],"mappings":"AAAA,SAAS,WAAT,EAAsB,QAAtB,QAAsC,OAAtC;AAEA,OAAM,SAAU,eAAV,CAA6B,GAA7B,EAA0C,YAA1C,EAAyD;AAC3D,QAAM,CAAC,KAAD,EAAQ,QAAR,IAAoB,QAAQ,CAAI,MAAK;AACvC,QAAI,OAAO,YAAP,KAAwB,WAA5B,EAAyC,OAAO,YAAP;AAEzC,UAAM,KAAK,GAAG,YAAY,CAAC,OAAb,CAAqB,GAArB,CAAd;AACA,QAAI,KAAJ,EAAW,OAAO,IAAI,CAAC,KAAL,CAAW,KAAX,CAAP;AAEX,WAAO,YAAP;AACH,GAPiC,CAAlC;AASA,QAAM,eAAe,GAAG,WAAW,CAC9B,QAAD,IAAgB;AACZ,QAAI,QAAQ,KAAK,KAAjB,EAAwB;AACxB,IAAA,QAAQ,CAAC,QAAD,CAAR;;AAEA,QAAI,QAAQ,KAAK,IAAjB,EAAuB;AACnB,MAAA,YAAY,CAAC,UAAb,CAAwB,GAAxB;AACH,KAFD,MAEO;AACH,MAAA,YAAY,CAAC,OAAb,CAAqB,GAArB,EAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAA1B;AACH;AACJ,GAV8B,EAW/B,CAAC,KAAD,EAAQ,QAAR,EAAkB,GAAlB,CAX+B,CAAnC;AAcA,SAAO,CAAC,KAAD,EAAQ,eAAR,CAAP;AACH","sourceRoot":"","sourcesContent":["import { useCallback, useState } from 'react';\r\nexport function useLocalStorage(key, defaultState) {\r\n    const [value, setValue] = useState(() => {\r\n        if (typeof localStorage === 'undefined')\r\n            return defaultState;\r\n        const value = localStorage.getItem(key);\r\n        if (value)\r\n            return JSON.parse(value);\r\n        return defaultState;\r\n    });\r\n    const setLocalStorage = useCallback((newValue) => {\r\n        if (newValue === value)\r\n            return;\r\n        setValue(newValue);\r\n        if (newValue === null) {\r\n            localStorage.removeItem(key);\r\n        }\r\n        else {\r\n            localStorage.setItem(key, JSON.stringify(newValue));\r\n        }\r\n    }, [value, setValue, key]);\r\n    return [value, setLocalStorage];\r\n}\r\n//# sourceMappingURL=useLocalStorage.js.map"]},"metadata":{},"sourceType":"module"}