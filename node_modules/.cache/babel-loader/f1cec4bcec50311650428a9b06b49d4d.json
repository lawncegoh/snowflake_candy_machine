{"ast":null,"code":"/* eslint-disable no-continue */\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable no-param-reassign */\n\n/* eslint-disable no-prototype-builtins */\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar errorClasses = {};\nvar deserializers = {};\nexport var addCustomErrorDeserializer = function (name, deserializer) {\n  deserializers[name] = deserializer;\n};\nexport var createCustomErrorClass = function (name) {\n  var C = function CustomError(message, fields) {\n    Object.assign(this, fields);\n    this.name = name;\n    this.message = message || name;\n    this.stack = new Error().stack;\n  };\n\n  C.prototype = new Error();\n  errorClasses[name] = C;\n  return C;\n}; // inspired from https://github.com/programble/errio/blob/master/index.js\n\nexport var deserializeError = function (object) {\n  if (typeof object === \"object\" && object) {\n    try {\n      // $FlowFixMe FIXME HACK\n      var msg = JSON.parse(object.message);\n\n      if (msg.message && msg.name) {\n        object = msg;\n      }\n    } catch (e) {// nothing\n    }\n\n    var error = void 0;\n\n    if (typeof object.name === \"string\") {\n      var name_1 = object.name;\n      var des = deserializers[name_1];\n\n      if (des) {\n        error = des(object);\n      } else {\n        var constructor = name_1 === \"Error\" ? Error : errorClasses[name_1];\n\n        if (!constructor) {\n          console.warn(\"deserializing an unknown class '\" + name_1 + \"'\");\n          constructor = createCustomErrorClass(name_1);\n        }\n\n        error = Object.create(constructor.prototype);\n\n        try {\n          for (var prop in object) {\n            if (object.hasOwnProperty(prop)) {\n              error[prop] = object[prop];\n            }\n          }\n        } catch (e) {// sometimes setting a property can fail (e.g. .name)\n        }\n      }\n    } else {\n      error = new Error(object.message);\n    }\n\n    if (!error.stack && Error.captureStackTrace) {\n      Error.captureStackTrace(error, deserializeError);\n    }\n\n    return error;\n  }\n\n  return new Error(String(object));\n}; // inspired from https://github.com/sindresorhus/serialize-error/blob/master/index.js\n\nexport var serializeError = function (value) {\n  if (!value) return value;\n\n  if (typeof value === \"object\") {\n    return destroyCircular(value, []);\n  }\n\n  if (typeof value === \"function\") {\n    return \"[Function: \" + (value.name || \"anonymous\") + \"]\";\n  }\n\n  return value;\n}; // https://www.npmjs.com/package/destroy-circular\n\nfunction destroyCircular(from, seen) {\n  var e_1, _a;\n\n  var to = {};\n  seen.push(from);\n\n  try {\n    for (var _b = __values(Object.keys(from)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var value = from[key];\n\n      if (typeof value === \"function\") {\n        continue;\n      }\n\n      if (!value || typeof value !== \"object\") {\n        to[key] = value;\n        continue;\n      }\n\n      if (seen.indexOf(from[key]) === -1) {\n        to[key] = destroyCircular(from[key], seen.slice(0));\n        continue;\n      }\n\n      to[key] = \"[Circular]\";\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  if (typeof from.name === \"string\") {\n    to.name = from.name;\n  }\n\n  if (typeof from.message === \"string\") {\n    to.message = from.message;\n  }\n\n  if (typeof from.stack === \"string\") {\n    to.stack = from.stack;\n  }\n\n  return to;\n}","map":{"version":3,"sources":["../src/helpers.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/* eslint-disable no-continue */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-param-reassign */\r\n/* eslint-disable no-prototype-builtins */\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nvar errorClasses = {};\r\nvar deserializers = {};\r\nexport var addCustomErrorDeserializer = function (name, deserializer) {\r\n    deserializers[name] = deserializer;\r\n};\r\nexport var createCustomErrorClass = function (name) {\r\n    var C = function CustomError(message, fields) {\r\n        Object.assign(this, fields);\r\n        this.name = name;\r\n        this.message = message || name;\r\n        this.stack = new Error().stack;\r\n    };\r\n    C.prototype = new Error();\r\n    errorClasses[name] = C;\r\n    return C;\r\n};\r\n// inspired from https://github.com/programble/errio/blob/master/index.js\r\nexport var deserializeError = function (object) {\r\n    if (typeof object === \"object\" && object) {\r\n        try {\r\n            // $FlowFixMe FIXME HACK\r\n            var msg = JSON.parse(object.message);\r\n            if (msg.message && msg.name) {\r\n                object = msg;\r\n            }\r\n        }\r\n        catch (e) {\r\n            // nothing\r\n        }\r\n        var error = void 0;\r\n        if (typeof object.name === \"string\") {\r\n            var name_1 = object.name;\r\n            var des = deserializers[name_1];\r\n            if (des) {\r\n                error = des(object);\r\n            }\r\n            else {\r\n                var constructor = name_1 === \"Error\" ? Error : errorClasses[name_1];\r\n                if (!constructor) {\r\n                    console.warn(\"deserializing an unknown class '\" + name_1 + \"'\");\r\n                    constructor = createCustomErrorClass(name_1);\r\n                }\r\n                error = Object.create(constructor.prototype);\r\n                try {\r\n                    for (var prop in object) {\r\n                        if (object.hasOwnProperty(prop)) {\r\n                            error[prop] = object[prop];\r\n                        }\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // sometimes setting a property can fail (e.g. .name)\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            error = new Error(object.message);\r\n        }\r\n        if (!error.stack && Error.captureStackTrace) {\r\n            Error.captureStackTrace(error, deserializeError);\r\n        }\r\n        return error;\r\n    }\r\n    return new Error(String(object));\r\n};\r\n// inspired from https://github.com/sindresorhus/serialize-error/blob/master/index.js\r\nexport var serializeError = function (value) {\r\n    if (!value)\r\n        return value;\r\n    if (typeof value === \"object\") {\r\n        return destroyCircular(value, []);\r\n    }\r\n    if (typeof value === \"function\") {\r\n        return \"[Function: \" + (value.name || \"anonymous\") + \"]\";\r\n    }\r\n    return value;\r\n};\r\n// https://www.npmjs.com/package/destroy-circular\r\nfunction destroyCircular(from, seen) {\r\n    var e_1, _a;\r\n    var to = {};\r\n    seen.push(from);\r\n    try {\r\n        for (var _b = __values(Object.keys(from)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n            var key = _c.value;\r\n            var value = from[key];\r\n            if (typeof value === \"function\") {\r\n                continue;\r\n            }\r\n            if (!value || typeof value !== \"object\") {\r\n                to[key] = value;\r\n                continue;\r\n            }\r\n            if (seen.indexOf(from[key]) === -1) {\r\n                to[key] = destroyCircular(from[key], seen.slice(0));\r\n                continue;\r\n            }\r\n            to[key] = \"[Circular]\";\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    if (typeof from.name === \"string\") {\r\n        to.name = from.name;\r\n    }\r\n    if (typeof from.message === \"string\") {\r\n        to.message = from.message;\r\n    }\r\n    if (typeof from.stack === \"string\") {\r\n        to.stack = from.stack;\r\n    }\r\n    return to;\r\n}\r\n//# sourceMappingURL=helpers.js.map"]},"metadata":{},"sourceType":"module"}